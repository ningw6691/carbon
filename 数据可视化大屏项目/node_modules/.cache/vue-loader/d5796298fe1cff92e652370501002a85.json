{"remainingRequest":"D:\\桌面\\双碳练习\\源码\\system-carbon-demo\\数据可视化大屏项目\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\桌面\\双碳练习\\源码\\system-carbon-demo\\数据可视化大屏项目\\src\\views\\indexs\\left-top.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\桌面\\双碳练习\\源码\\system-carbon-demo\\数据可视化大屏项目\\src\\views\\indexs\\left-top.vue","mtime":1733221966127},{"path":"D:\\桌面\\双碳练习\\源码\\system-carbon-demo\\数据可视化大屏项目\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733221957955},{"path":"D:\\桌面\\双碳练习\\源码\\system-carbon-demo\\数据可视化大屏项目\\node_modules\\vue-loader\\lib\\index.js","mtime":1733221965260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBjdXJyZW50R0VUIH0gZnJvbSAnYXBpL21vZHVsZXMnDQpsZXQgc3R5bGUgPSB7DQogIGZvbnRTaXplOiAyNA0KfQ0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBvcHRpb25zOiB7fSwNCiAgICAgIHBhZ2VmbGFnOiB0cnVlLA0KICAgICAgdGltZXI6IG51bGwsDQogICAgICBwb3dlckNvbnN1bWVDZmc6IHsNCiAgICAgICAgbnVtYmVyOiBbMF0sDQogICAgICAgIGNvbnRlbnQ6ICd7bnR9JywNCiAgICAgICAgc3R5bGU6IHsNCiAgICAgICAgICAuLi5zdHlsZSwNCiAgICAgICAgICAvLyBzdHJva2U6ICIjMDBmZGZhIiwNCiAgICAgICAgICBmaWxsOiAiIzAwZmRmYSIsDQogICAgICAgIH0sDQogICAgICB9LA0KICAgICAgd2F0ZXJDb25zdW1lQ2ZnOiB7DQogICAgICAgIG51bWJlcjogWzBdLA0KICAgICAgICBjb250ZW50OiAne250fScsDQogICAgICAgIHN0eWxlOiB7DQogICAgICAgICAgLi4uc3R5bGUsDQogICAgICAgICAgLy8gc3Ryb2tlOiAiIzA3ZjdhOCIsDQogICAgICAgICAgZmlsbDogIiMwN2Y3YTgiLA0KICAgICAgICB9LA0KICAgICAgfSwNCiAgICAgIGNhcmJvbkVtaXNzaW9uQ2ZnOiB7DQogICAgICAgIG51bWJlcjogWzBdLA0KICAgICAgICBjb250ZW50OiAne250fScsDQogICAgICAgIHN0eWxlOiB7DQogICAgICAgICAgLi4uc3R5bGUsDQogICAgICAgICAgLy8gc3Ryb2tlOiAiI2UzYjMzNyIsDQogICAgICAgICAgZmlsbDogIiNlM2IzMzciLA0KICAgICAgICB9LA0KICAgICAgfSwNCiAgICB9Ow0KICB9LA0KICBmaWx0ZXJzOiB7DQogICAgbnVtc0ZpbHRlcihtc2cpIHsNCiAgICAgIHJldHVybiBtc2cgfHwgMDsNCiAgICB9LA0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuZ2V0RGF0YSgpDQogIH0sDQogIG1vdW50ZWQoKSB7DQogIH0sDQogIGJlZm9yZURlc3Ryb3koKSB7DQogICAgdGhpcy5jbGVhckRhdGEoKQ0KDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvL+a4heeQhuaKpeihqOaVsOaNrg0KICAgIGNsZWFyRGF0YSgpIHsNCiAgICAgIGlmICh0aGlzLnRpbWVyKSB7DQogICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcikNCiAgICAgICAgdGhpcy50aW1lciA9IG51bGwNCiAgICAgIH0NCiAgICB9LA0KICAgIC8v6I635Y+W5oql6KGo5pWw5o2uDQogICAgZ2V0RGF0YSgpIHsNCiAgICAgIHRoaXMucGFnZWZsYWcgPSB0cnVlOw0KICAgICAgY3VycmVudEdFVCgiYmlnMiIpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICBsZXQgZW1pc3Npb25PdmVydmlldyA9IHJlcy5yb3dzWzBdOw0KICAgICAgICAgIHRoaXMud2F0ZXJDb25zdW1lQ2ZnID0gew0KICAgICAgICAgICAgLi4udGhpcy53YXRlckNvbnN1bWVDZmcsDQogICAgICAgICAgICBudW1iZXI6IFtlbWlzc2lvbk92ZXJ2aWV3LnRvdGFsV2F0ZXJDb25zdW1lICsgZW1pc3Npb25PdmVydmlldy50b3RhbE9mZmljZVdhdGVyQ29uc3VtZV0NCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5wb3dlckNvbnN1bWVDZmcgPSB7DQogICAgICAgICAgICAuLi50aGlzLnBvd2VyQ29uc3VtZUNmZywNCiAgICAgICAgICAgIG51bWJlcjogW2VtaXNzaW9uT3ZlcnZpZXcudG90YWxQb3dlckNvbnN1bWUgKyBlbWlzc2lvbk92ZXJ2aWV3LnRvdGFsT2ZmaWNlUG93ZXJDb25zdW1lXQ0KICAgICAgICAgIH0NCiAgICAgICAgICB0aGlzLmNhcmJvbkVtaXNzaW9uQ2ZnID0gew0KICAgICAgICAgICAgLi4udGhpcy5jYXJib25FbWlzc2lvbkNmZywNCiAgICAgICAgICAgIG51bWJlcjogW2VtaXNzaW9uT3ZlcnZpZXcudG90YWxDYXJib25FbWlzc2lvbl0NCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5zd2l0cGVyKCkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLnBhZ2VmbGFnID0gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy/ova7or6INCiAgICBzd2l0cGVyKCkgew0KICAgICAgaWYgKHRoaXMudGltZXIpIHsNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICBsZXQgbG9vcGVyID0gKGEpID0+IHsNCiAgICAgICAgdGhpcy5nZXREYXRhKCkNCiAgICAgIH07DQogICAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwobG9vcGVyLCB0aGlzLiRzdG9yZS5zdGF0ZS5zZXR0aW5nLmVjaGFydHNBdXRvVGltZSk7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["left-top.vue"],"names":[],"mappings":";AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"left-top.vue","sourceRoot":"src/views/indexs","sourcesContent":["<template>\r\n  <ul class=\"user_overview flex\" v-if=\"pageflag\">\r\n    <li class=\"user_overview-item\" style=\"color: #00fdfa\">\r\n      <div class=\"user_overview_nums allnum \">\r\n        <dv-digital-flop :config=\"powerConsumeCfg\" style=\"width:100%;height:100%;\" />\r\n      </div>\r\n      <p>耗电量</p>\r\n    </li>\r\n    <li class=\"user_overview-item\" style=\"color: #07f7a8\">\r\n      <div class=\"user_overview_nums online\">\r\n        <dv-digital-flop :config=\"waterConsumeCfg\" style=\"width:100%;height:100%;\" />\r\n      </div>\r\n      <p>耗水量</p>\r\n    </li>\r\n    <li class=\"user_overview-item\" style=\"color: #e3b337\">\r\n      <div class=\"user_overview_nums offline\">\r\n        <dv-digital-flop :config=\"carbonEmissionCfg\" style=\"width:100%;height:100%;\" />\r\n      </div>\r\n      <p>碳排放量</p>\r\n    </li>\r\n  </ul>\r\n  <Reacquire v-else @onclick=\"getData\" line-height=\"200px\">\r\n    重新获取\r\n  </Reacquire>\r\n</template>\r\n\r\n<script>\r\nimport { currentGET } from 'api/modules'\r\nlet style = {\r\n  fontSize: 24\r\n}\r\nexport default {\r\n  data() {\r\n    return {\r\n      options: {},\r\n      pageflag: true,\r\n      timer: null,\r\n      powerConsumeCfg: {\r\n        number: [0],\r\n        content: '{nt}',\r\n        style: {\r\n          ...style,\r\n          // stroke: \"#00fdfa\",\r\n          fill: \"#00fdfa\",\r\n        },\r\n      },\r\n      waterConsumeCfg: {\r\n        number: [0],\r\n        content: '{nt}',\r\n        style: {\r\n          ...style,\r\n          // stroke: \"#07f7a8\",\r\n          fill: \"#07f7a8\",\r\n        },\r\n      },\r\n      carbonEmissionCfg: {\r\n        number: [0],\r\n        content: '{nt}',\r\n        style: {\r\n          ...style,\r\n          // stroke: \"#e3b337\",\r\n          fill: \"#e3b337\",\r\n        },\r\n      },\r\n    };\r\n  },\r\n  filters: {\r\n    numsFilter(msg) {\r\n      return msg || 0;\r\n    },\r\n  },\r\n  created() {\r\n    this.getData()\r\n  },\r\n  mounted() {\r\n  },\r\n  beforeDestroy() {\r\n    this.clearData()\r\n\r\n  },\r\n  methods: {\r\n    //清理报表数据\r\n    clearData() {\r\n      if (this.timer) {\r\n        clearInterval(this.timer)\r\n        this.timer = null\r\n      }\r\n    },\r\n    //获取报表数据\r\n    getData() {\r\n      this.pageflag = true;\r\n      currentGET(\"big2\").then((res) => {\r\n        if (res.success) {\r\n          let emissionOverview = res.rows[0];\r\n          this.waterConsumeCfg = {\r\n            ...this.waterConsumeCfg,\r\n            number: [emissionOverview.totalWaterConsume + emissionOverview.totalOfficeWaterConsume]\r\n          }\r\n          this.powerConsumeCfg = {\r\n            ...this.powerConsumeCfg,\r\n            number: [emissionOverview.totalPowerConsume + emissionOverview.totalOfficePowerConsume]\r\n          }\r\n          this.carbonEmissionCfg = {\r\n            ...this.carbonEmissionCfg,\r\n            number: [emissionOverview.totalCarbonEmission]\r\n          }\r\n          this.switper()\r\n        } else {\r\n          this.pageflag = false;\r\n        }\r\n      });\r\n    },\r\n    //轮询\r\n    switper() {\r\n      if (this.timer) {\r\n        return\r\n      }\r\n      let looper = (a) => {\r\n        this.getData()\r\n      };\r\n      this.timer = setInterval(looper, this.$store.state.setting.echartsAutoTime);\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang='scss' scoped>\r\n.user_overview {\r\n  li {\r\n    flex: 1;\r\n\r\n    p {\r\n      text-align: center;\r\n      height: 16px;\r\n      font-size: 16px;\r\n    }\r\n\r\n    .user_overview_nums {\r\n      width: 160px;\r\n      height: 160px;\r\n      text-align: center;\r\n      line-height: 100px;\r\n      font-size: 12px;\r\n      margin: 40px auto 30px;\r\n      background-size: cover;\r\n      background-position: center center;\r\n      position: relative;\r\n\r\n      &::before {\r\n        content: \"\";\r\n        position: absolute;\r\n        width: 100%;\r\n        height: 100%;\r\n        top: 0;\r\n        left: 0;\r\n        font-size: 5px;\r\n        background-size: cover;\r\n      }\r\n\r\n      &.bgdonghua::before {\r\n        animation: rotating 14s linear infinite;\r\n      }\r\n    }\r\n\r\n    .allnum {\r\n      // background-image: url(\"../../assets/img/left_top_lan.png\");\r\n      &::before {\r\n        background-image: url(\"../../assets/img/left_top_lan.png\");\r\n      }\r\n    }\r\n\r\n    .online {\r\n      &::before {\r\n        background-image: url(\"../../assets/img/left_top_lv.png\");\r\n      }\r\n    }\r\n\r\n    .offline {\r\n      &::before {\r\n        background-image: url(\"../../assets/img/left_top_huang.png\");\r\n      }\r\n    }\r\n\r\n    .laramnum {\r\n      &::before {\r\n        background-image: url(\"../../assets/img/left_top_hong.png\");\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"]}]}